# Annotation to PDF

FigmaのDev Modeアノテーションを可視的なコールアウト要素に変換し、PDF出力に含められるようにするプラグインです。

## 課題

Figmaでデザインを作成する際、Dev Modeのアノテーション機能を使って開発者向けの注釈を追加できます。しかし、これらのアノテーションには以下の制限があります：

- **PDFエクスポートに含まれない** - アノテーションはDev Mode専用の機能であり、PDFとして書き出すと表示されません
- **クライアント納品物に使えない** - デザイン仕様書やスタイルガイドをPDFで納品する際、アノテーションの内容を別途ドキュメント化する必要があります
- **印刷できない** - レビュー用に印刷したい場合、アノテーションは印刷されません

## 解決策

このプラグインは、Dev Modeアノテーションを**可視的なコールアウト要素**として自動生成します。生成されたコールアウトは通常のFigmaオブジェクトなので、PDFエクスポートや印刷に含まれます。

## ユースケース

### デザイン仕様書のPDF納品
クライアントや外部パートナーにデザイン仕様をPDFで納品する際、開発者向けの注釈も一緒に含めたい場合に使用します。

### デザインレビュー資料の作成
チーム内でのデザインレビューやプレゼンテーション用に、アノテーション付きのPDFを作成できます。

### オフライン参照用ドキュメント
インターネット接続がない環境でもデザイン仕様を確認できるよう、アノテーション付きのPDFを作成します。

## 機能

- **アノテーション読み取り**: 選択したフレーム内のDev Modeアノテーションを自動検出
- **コールアウト生成**: 番号付きのコールアウト要素を自動生成
- **スマート配置**: 要素の位置に応じて左右に自動配置（フレームの外側に配置）
- **マーカー表示**: アノテーション対象の要素に番号バッジを配置
- **コネクター線**: マーカーとコールアウトを点線で接続
- **複数フレーム対応**: 複数フレームを選択して一括生成（番号は各フレームごとにリセット）
- **セクション対応**: フレームがセクション内にある場合、コールアウトもセクション内に配置
- **簡単クリーンアップ**: ワンクリックで生成したコールアウトをすべて削除

## インストール

### 開発環境セットアップ

```bash
cd figma-annotation-to-visible-element

# 依存関係をインストール
npm install

# TypeScriptをビルド
npm run build

# 開発中は変更を監視
npm run watch
```

### Figmaへのインポート

1. Figmaデスクトップアプリを開く
2. **Plugins** → **Development** → **Import plugin from manifest...** を選択
3. このプロジェクトの `manifest.json` を選択

## 使い方

### 基本的なワークフロー

1. **アノテーションを追加**: FigmaのDev Modeでデザイン要素にアノテーションを追加
2. **フレームを選択**: アノテーションが含まれるフレームを選択（複数選択可）
3. **コールアウト生成**: 「Generate Callouts」をクリック
4. **PDFエクスポート**: File → Export でPDFを出力
5. **クリーンアップ**: 「Remove Callouts」をクリックして生成したコールアウトを削除

### Tips

- アノテーションは位置順（上から下、左から右）に番号が振られます
- フレームの左半分にある要素のコールアウトは左側に、右半分にある要素は右側に配置されます
- 元のDev Modeアノテーションは削除されません（コールアウト削除後も残ります）
- 複数フレームを選択すると、各フレームごとに番号が1からリセットされます

## ファイル構成

```
figma-annotation-to-visible-element/
├── manifest.json      # プラグイン設定
├── code.ts           # メインロジック（TypeScript）
├── code.js           # コンパイル済みJavaScript
├── ui.html           # プラグインUI
├── package.json      # Node.js依存関係
├── tsconfig.json     # TypeScript設定
├── README.md         # 英語版README
└── README_ja.md      # このファイル
```

## カスタマイズ

### 色の変更

`code.ts` の `COLORS` オブジェクトを編集：

- コールアウトの背景色・枠線色
- マーカーの色
- テキストの色
- コネクター線の色

### サイズの変更

`code.ts` の定数を編集：

- `CALLOUT_WIDTH`: コールアウトの幅（デフォルト: 130px）
- `CALLOUT_GAP`: フレームとコールアウトの間隔（デフォルト: 24px）
- `MARKER_SIZE`: マーカーのサイズ（デフォルト: 24px）

## 動作要件

- Figma デスクトップアプリ
- Node.js 18以上（開発用）

## 制限事項

- Dev Modeへのアクセスが必要です
- アノテーション内のMarkdown書式はプレーンテキストとして表示されます

## ライセンス

MIT
